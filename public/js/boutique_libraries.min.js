const LOCALE="en-us",API_PATH="",PAGE=location.pathname.split("/")[1];var Boutique=Boutique||{};!function(){"use strict";Boutique.Inflection=Boutique.Inflection||{},Boutique.Settings=Boutique.Settings||{},Boutique.Messages=Boutique.Messages||{},Boutique.Storage=Boutique.Storage||{},Boutique.Utilities=Boutique.Utilities||{},Boutique.Validator=Boutique.Validator||{},Boutique.Controllers=Boutique.Controllers||{},Boutique.debug=!1,Boutique.init=function(){}}(),function(){"use strict";Boutique.Inflection={plural:{"(quiz)$":function(t,e){return e+"zes"},"^(ox)$":function(t,e){return e+"en"},"([m|l])ouse$":function(t,e){return e+"ice"},"(matr|vert|ind)ix|ex$":function(t,e){return e+"ices"},"(x|ch|ss|sh)$":function(t,e){return e+"es"},"([^aeiouy]|qu)y$":function(t,e){return e+"ies"},"(hive)$":function(t,e){return e+"s"},"(?:([^f])fe|([lr])f)$":function(t,e,i){return e+i+"ves"},"(shea|lea|loa|thie)f$":function(t,e){return e+"ves"},sis$:"ses","([ti])um$":function(t,e){return e+"a"},"(tomat|potat|ech|her|vet)o$":function(t,e){return e+"oes"},"(bu)s$":function(t,e){return e+"ses"},"(alias)$":function(t,e){return e+"es"},"(octop)us$":function(t,e){return e+"i"},"(ax|test)is$":function(t,e){return e+"es"},"(us)$":function(t,e){return e+"es"},s$:"s","$/":"s"},singular:{"(quiz)zes$":function(t,e){return e},"(matr)ices$":function(t,e){return e+"ix"},"(vert|ind)ices$":function(t,e){return e+"ex"},"^(ox)en$":function(t,e){return e},"(alias)es$":function(t,e){return e},"(octop|vir)i$":function(t,e){return e+"us"},"(cris|ax|test)es$":function(t,e){return e+"is"},"(shoe)s$":function(t,e){return e},"(o)es$":function(t,e){return e},"(bus)es$":function(t,e){return e},"([m|l])ice$":function(t,e){return e+"ouse"},"(x|ch|ss|sh)es$":function(t,e){return e},"(m)ovies$":function(t,e){return e+"ovie"},"(s)eries$":function(t,e){return e+"eries"},"([^aeiouy]|qu)ies$":function(t,e){return e+"y"},"([lr])ves$":function(t,e){return e+"f"},"(tive)s$":function(t,e){return e},"(hive)s$":function(t,e){return e},"(li|wi|kni)ves$":function(t,e){return e+"fe"},"(shea|loa|lea|thie)ves$":function(t,e){return e+"f"},"(^analy)ses$":function(t,e){return e+"sis"},"((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":function(t,e,i){return e+i+"sis"},"([ti])a$":function(t,e){return e+"um"},"(n)ews$":function(t,e){return e+"ews"},"(h|bl)ouses$":function(t,e){return e+"ouse"},"(corpse)s$":function(t,e){return e},"(us)es$":function(t,e){return e},s$:""},irregular:{registered:"registered",move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",music:"music",person:"people",dns:"dns",admin:"admin"},uncountable:["sheep","fish","deer","series","species","money","rice","information","equipment"],irregularWords:[],splitWords:[],camelize:function(t){return t=(t=(t="x"+trim(t)).toLowerCase()).replace(/[\s_]+/," "),t=(t=(t=ucwords(t)).replace(/\s+/,"")).substring(0,t.length-1)},decamelize:function(t,e=" "){return t=(t=(t=trim(t)).replace(/([a-z])([A-Z])/,$1+e+$2)).toLowerCase()},humanize:function(t){return t=(t=trim(t)).replace(/[_-]+/," ")},joinWords:function(t){var e,i,n=Boutique.Inflection;for(e in n.splitWords)if(i=new RegExp("^"+n.splitWords[e]+"$","i"),t.match(i))return t.replace(i,e);return t},pluralize:function(t){var e,i,n=Boutique.Inflection;if(in_array(t.toLowerCase(),n.uncountable))return t;for(i in n.irregularWords)if(e=n.irregularWords[i],i=new RegExp(i+"$","i"),t.match(i))return t.replace(i,e);for(i in n.irregular)if(e=n.irregular[i],i=new RegExp(i+"$","i"),t.match(i))return t.replace(i,e);for(i in n.plural)if(e=n.plural[i],i=new RegExp(i,"i"),t.match(i))return t.replace(i,e);return t},pluralizeIf:function(t,e){var i=Boutique.Inflection;return 1==t?"1 "+e:t+" "+i.pluralize(e)},singularize:function(t){var e,i,n=Boutique.Inflection;if(in_array(t.toLowerCase(),n.uncountable))return t;for(i in n.irregularWords)if(e=n.irregularWords[i],i=new RegExp(i+"$","i"),t.match(i))return t.replace(i,e);for(i in n.irregular)if(e=n.irregular[i],i=new RegExp(i+"$","i"),t.match(i))return t.replace(i,e);for(i in n.singular)if(e=n.singular[i],i=new RegExp(i,"i"),t.match(i))return t.replace(i,e);return t},splitWords:function(t){var e,i,n=Boutique.Inflection;for(i in n.splitWords)if(e=n.irregular[i],i=new RegExp(i+"$","i"),t.match(i))return t.replace(i,e);return t},underscore:function(t){return t=(t=trim(t)).replace(/\s+/,"_")}}}(),function(){"use strict";Boutique.Settings.Translations={messageConfirmDelete:"Are you sure you want to permanently delete this item?",messageLocalStorageNotSupported:"Local Storage not supported by this browser.",messageCanceling:"Canceling...",messageDiscarding:"Discarding...",messageDeleting:"Deleting...",messageLoading:"Loading...",messageRestoring:"Restoring...",messageSaving:"Saving...",messageSending:"Sending...",messageSubmitting:"Submitting...",messagePublishing:"Publishing...",messageUpdating:"Updating...",messageWorking:"Working...",textPleaseWait:"Please wait...",validateAlphaNum:"%s must only contain letters and numbers",validateCcNum:"%s must be a valid credit card number",validateSymbols:"symbols",validateDate:"%s is not a valid date",validateDateFormat:"%s must be in date format: %s",validateDateMax:"%s must be earlier than: %s",validateDateMin:"%s must be later than: %s",validateEndsWith:"%s must end with: %s",validateEndsNotWith:"%s must not end with: %s",validateDefault:"%s has an error",validateDigits:"%s must consist only of digits",validateEmail:"%s is an invalid email address",validateEquals:"%s must equal the value: %s",validateEqualsNot:"%s must not equal the value: %s",validateFloat:"%s must consist of a float value",validateInteger:"%s must consist of an integer value",validateIp:"%s is an invalid IP address",validateLength:"%s must be exactly %s %s",validateLengthBetween:"%s must be between %s and %s %s",validateLengthMax:"%s must be no longer than %s %s",validateLengthMin:"%s must be at least %s %s",validateMatchesField:"%s must match the value in field: %s",validateMatchesNotField:"%s must not match the value in field: %s",validateMatchesRegExp:"%s must match the regular expression: %s",validateNumBetween:"%s must be a number between %s and %s%s",validateNumMax:"%s must be a number less than%s %s",validateNumMin:"%s must be a number greater than%s %s",validateFieldIn:"%s must be among these fields: %s",validateOrEqualTo:"or equal to",validateRequired:"%s is required",validateStartsWith:"%s must start with: %s",validateStartsNotWith:"%s must not start with: %s",validateUrl:"%s is an invalid url",validateWithoutLimits:"(without limits)"},Boutique.Settings.t=function(t){return null==this.Translations[t]?t:this.Translations[t]}}(),function(){"use strict";Boutique.Utilities={initialized:[],init:function(){const t=Boutique.Utilities;t.initBootbox(),t.initHelpBlocks(),t.initMultiModal(),t.setModalScroll()},initBootbox:function(){bootbox.setDefaults({locale:LOCALE,show:!0,backdrop:!0,closeButton:!1,animate:!0,className:"my-modal"})},initHelpBlocks:function(t){!function(t){$(t).each((function(){let t=$(this).find(".help-block"),e=$(this).find(".btn-help");t.length?(t.hide(),e.show(),$(this).find(".btn-help").off("click").on("click",(function(){t.is(":visible")?t.hide():t.animate({opacity:1,height:"show"})}))):e.hide()}))}(t=$(t).length?$(t):$(".modal-dialog"))},initMultiModal:function(){let t=1060;$(document).on("show.bs.modal",".modal",(function(e){let i=$(this),n=$(".modal:visible").length,o=t+10*n,r=30*(n+1)+"px";i.css("z-index",o),i.css("margin-top",r),$($(".modal-backdrop.show").not(".modal-stack")[n-1]).css("z-index",o-1).addClass("modal-stack")})),$(document).on("hidden.bs.modal",".modal",(function(){let e=$(this);e.css("z-index",t),e.css("margin-top","30px"),$(".modal-backdrop.modal-stack").css("z-index",1059).removeClass("modal-stack"),$(".modal.show").length?$("body").addClass("modal-open"):$("body").removeClass("modal-open")}))},initSearchForm:function(t,e,i){let n=$(t);n.length&&(n.off("submit").on("submit",(function(t){return t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof(e||void 0)&&e.call(null,i),!1})),n.find('input[name="search"]').off("keyup").on("keyup",(function(t){13===t.which&&(t.preventDefault(),n.trigger("submit"))})),n.find("[data-orderby]").off("click").on("click",(function(){let t=n.find('input[name="orderby"]'),o=t.val(),r=$(this).attr("data-orderby"),s=n.find('input[name="sort"]'),a=s.val(),u=r===o&&a.match(/asc/i)?"desc":"asc";t.val(r),s.val(u),"function"==typeof(e||void 0)&&e.call(null,i)})),n.find(".pagination .page-link").attr("href","#").off("click"),n.find(".pagination").off("click").on("click",(function(t){if(n.find(".pagination").find("li").removeAttr("aria-current").removeAttr("aria-disabled").alterClass("active disabled",""),t&&t.target&&"page-link"===t.target.className){let e=$(t.target),i="prev"===e.attr("rel"),o="next"===e.attr("rel"),r=$(':input[name="page"]'),s=parseInt(n.find(".pagination li:nth-of-type(8)").text()),a=r.val();a=i?Math.max(parseInt(a)-1,1):o?Math.min(parseInt(a)+1,s):parseInt(e.text()),r.val(a),n.trigger("submit"),window.history.replaceState(null,"",window.location.href.replace(/(page=)[0-9]+/,"$1"+a))}})))},initSegmentSelect:function(t,e){Boutique.Utilities;let i,n,o;(t=$(t)).length&&(n=t.find(".segmented-control button"),o=t.find(".segment"),n.off("click").on("click",(function(){let t=this;i="#"+$(this).attr("data-navigate"),n.add(o).removeClass("active"),$(t).add($(i)).addClass("active"),"function"==typeof(e||void 0)&&e.call(null,t)})))},initSelectPicker:function(t,e){const i=Boutique.Utilities;let n="selectpicker-active";t=t||$("body"),$(t).find("select.selectpicker").each((function(){let t=$(this),o={delay:0,style:"",iconBase:"icon",tickIcon:"icon-check",size:10},r=e&&$.isPlainObject(e)?i.mergeObjects(o,e):o;setTimeout((function(){t.hasClass(n)?t.selectpicker("refresh"):t.addClass(n).selectpicker(r).trigger("change"),t.hasClass("select-nested")&&i.initSelectNested(t.parent().parent())}),r.delay)})),$(t).find("button.selectpicker").removeAttr("title")},initTooltips:function(t){if(!Modernizr.touch){let e,i,n,o,r="",s="",a="",u="";t=$(t).length?$(t):$("body"),r+=".toolbar a.tt,",r+=".primary-action a.expand-menu.tt,",r+=".primary-action .icon.tt,",r+="tr a.expand-menu.tt, li a.expand-menu.tt,",r+="tr .element-menu .tt, li .element-menu .tt,",r+="tr .content-preview.tt,",r+="tr th .tt,",r+="tr td .tt,",r+=".block.row .tt,",r+=".modal-content .tt,",r+=".input-group-search .tt,",r+=".modal-full .tt,",r+=".gallery .thumbs .tt",s+=".primary-action .element-menu a.tt,",a+="",u+=".editor-actions button .tt,",u+=".editor-iframe-actions button .tt,",e=$(t).find(rtrim(r,",")),i=$(t).find(rtrim(s,",")),n=$(t).find(rtrim(a,",")),o=$(t).find(rtrim(u,",")),e.addClass("ttb"),i.addClass("ttl"),n.addClass("ttr"),o.addClass("ttt"),$(t).find(".tt.ttb").tooltip({container:"body",placement:"bottom"}),$(t).find(".tt.ttl").tooltip({container:"body",placement:"left"}),$(t).find(".tt.ttr").tooltip({container:"body",placement:"right"}),$(t).find(".tt.ttt").tooltip({container:"body",placement:"top"}),o.add(e).add(i).add(n).removeClass("tt")}},intervals:[],isJSON:function(t){let e,i=!0;"string"!=typeof t&&(t=JSON.stringify(t));try{e=JSON.parse(t)}catch(t){i=!1}return i},mergeObjects:function(t,e,i){if(i=i||!1,t&&e){let n={};n=i?jQuery.extend(t,e):$.extend({},t,e)}return newObj},pageset:function(t,e){let i=$(e).closest("form"),n=(i.find(':input[name="srow"]'),i.find(':input[name="erow"]'),i.find(':input[name="page"]')),o=i.find(':input[name="perpage"]');return""==t?(n.val(1),n=!1):"‹"==t?(n.val(Math.max(parseInt(n.val()-1),1)),n=!0):"›"==t?(n.val(Math.max(parseInt(n.val()+1),1)),n=!0):(n.val(t),n=!0),1==n.val()?($srow.val(1),$erow.val(parseInt(o.val()))):($srow.val((parseInt(n.val())-1)*parseInt(o.val())+1),$erow.val(parseInt($srow.val())+parseInt(o.val())-1)),n},setDialogTitle:function(t,e){if(t){let i=t.find(".modal-header h3"),n=trim(i.text());n=n.replace(/(^\s*New\s+|\s+Properties\s*$)/i,""),n=e?n+" Properties":"New "+n,i.text(n)}},setModalScroll:function(){$(".modal.show").length?$("body").addClass("modal-open"):$("body").removeClass("modal-open")},timeouts:[],uid:function(){return("00000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5)},uuid:function(){let t=(new UUID).createUUID();return t=t.replace(/-/g,""),t}},$((function(){Boutique.Utilities.init()}))}(),function(){"use strict";Boutique.Messages={icons:{danger:"icon-angry",info:"icon-smiley",progress:"icon-spinner3 icon-spin",success:"icon-happy",validation:"icon-angry",warning:"icon-shocked"},id:"#boutique_message",class:"boutique-message-",loc:"body",type:"progress",text:Boutique.Settings.t("messageWorking"),titles:{danger:"The following errors occurred:",info:"",progress:"",success:"The following actions were successful:",validation:"The following validation errors occurred:",warning:"The following warnings occurred:"},tohide:null,types:["validation","danger","warning","info","success","progress"],build:function(t,e){const i=Boutique.Messages;let n,o,r="";if(t=t||i.text,t=Array.isArray(t)?t:[t],e=e||i.type,n=i.icons[e]||i.icons.progress,r+='<div id="'+i.id.replace(/#/,"")+'" class="status block-status '+i.class+e+'">',t.length>1){for(o in r+=i.titles[e]?"<p>"+i.titles[e]+"</p>":"",r+="<ul>",t)r+='<li><span class="text">'+t[o]+"</span></li>";r+="</ul>"}else r+="<p>"+("progress"===e?'<span class="boutique-spinner"></span>':"")+"&nbsp; "+t[0]+" &nbsp;</p>";return r+="</div>",r},danger:function(t,e){return Boutique.Messages.show(t,"danger",e)},gettype:function(t){const e=Boutique.Messages;let i,n,o;for(i in e.types)if(n=e.types[i],o=!(!t||!t[n])&&t[n],o&&o.length)return n;return e.types.pop()},hide:function(t,e,i,n){const o=Boutique.Messages;t=t||o.loc,e=e||0,clearTimeout(o.tohide),$(t).length&&(o.tohide=setTimeout((function(){$(t).unblock(),"function"==typeof(i||void 0)?i.call():"function"==typeof(n||void 0)&&n.call()}),e))},info:function(t,e){return Boutique.Messages.show(t,"info",e)},progress:function(t,e){return Boutique.Messages.show(t,"progress",e)},response:function(t,e,i,n,o,r){const s=Boutique.Messages;let a,u,l,c,d,f,h=Boutique.Validator,g=200,m=2e3,p="success",b="";if(n=n||s.loc,u=$(n).find("form"),"error"==e&&t.getResponseHeader&&t.getResponseHeader("Boutique-Messages")?t=t.getResponseHeader("Boutique-Messages"):i&&i.getResponseHeader&&i.getResponseHeader("Boutique-Messages")?t=i.getResponseHeader("Boutique-Messages"):$('[name="boutique:message"]').length&&(t=$('[name="boutique:message"]').attr("content")),trim(t))try{if(a=JSON.parse(t),a.messages){if(b=a.messages,p=s.gettype(b),d=[],f="validation"===p&&u.length,f)return $(n).unblock(),h.clearErrors(u),h.displayErrors(b.validation[0],u),p;for(l in b[p])c=b[p][l].text,g=Math.max(g,parseInt(b[p][l].code)),"error"==e&&(c="<strong>Error "+g+":</strong> "+c),d.push(c);409===g&&(d=Boutique.Settings.t("messageReloadRequired"),r=function(){return location.reload(),!1}),s.show(d,p,n),"danger"!==p&&"warning"!==p||(s.danger(d,n),m=5e3,o=null)}}catch(t){}return s.hide(n,m,o,r),p},show:function(t,e,i){const n=Boutique.Messages;let o,r;return t=t||n.text,e=e||n.type,n.loc=i||n.loc,r=n.build(t,e),$(n.id).length?($(n.id).replaceWith(r),$(".blockUI.blockMsg").center()):(o={message:r},$(i).block(o)),!0},success:function(t,e){return Boutique.Messages.show(t,"success",e)},warning:function(t,e){return Boutique.Messages.show(t,"warning",e)}}}(),function(){"use strict";Boutique.Storage={_dec:function(t,e){let i,n;if(t&&(t===this.Local||t===this.Session)&&(i=t.get(e),"object"==typeof i&&i.value))return n=i.value,parseInt(n)==n&&"object"!=typeof n?(n=parseInt(n),t.set(e,n-1)):(console.error("Error: Value to be decremented ["+n+"] is not of Integer type"),!1)},_del:function(t,e){let i,n,o,r;if(t&&(t==this.Local||t==this.Session)){if(void 0!==e){if(!t.supported)try{return $.cookie(e,null),!0}catch(t){return!1}return t.cache.removeItem(e),!0}if(t.supported)t.cache.clear();else try{for(i=document.cookie.split(";"),o=0;o<i.length;o++)n=i[o].split("="),r=n[0],$.cookie(r,null)}catch(t){return null}}},_get:function(t,e){let i,n,o,r,s,a,u=[];if(t&&(t===this.Local||t===this.Session)){if(void 0===e){if(t.supported)for(s in t.cache)s.length&&u.push({k:s,value:t.rtn(t.cache.getItem(s))});else try{for(n=document.cookie.split(";"),r=0;r<n.length;r++)o=n[r].split("="),a=o[0],u.push({k:a,value:t.rtn($.cookie(a))})}catch(t){return null}return u}if(!t.supported)try{return t.rtn($.cookie(e))}catch(t){return null}return i=t.cache.getItem(e),t.rtn(i)}},_getData:function(t,e){const i=Boutique.Utilities;let n,o,r="";return!t||t!==this.Local&&t!==this.Session||e&&""!=e&&(t.cache?(o=t.get(e),o&&o.hasOwnProperty("value")&&o.hasOwnProperty("expires")&&(r=i.isJSON(o.value)?t.rtn(o.value):o.value,n=o.expires)):(o=$("#"+e),o.length&&o.not(":empty")&&(r=t.rtn(o.text()),n=o.attr("data-expires"))),n&&parseInt(n)<Date.now()&&(r="")),r},_inc:function(t,e){let i,n;if(t&&(t===this.Local||t===this.Session)&&(i=t.get(e),i&&i.hasOwnProperty("value")))return n=i.value,parseInt(n)==n&&"object"!=typeof n?(n=parseInt(n),t.set(e,n+1)):(console.error("Error: Value to be incremented ["+n+"] is not of Integer type"),!1)},_init:function(t){t&&(t===this.Local&&this._supported(t)?t.cache=window.localStorage:t===this.Session&&this._supported(t)&&(t.cache=window.sessionStorage))},_prepIn:function(t,e){if(t&&(t===this.Local||t===this.Session))for(;"string"!=typeof e;)e=JSON.stringify(e);return e},_prepOut:function(t,e){if(t&&(t===this.Local||t===this.Session))for(;"object"!=typeof e;)e=JSON.parse(e);return e},_rtn:function(t,e){let i=e;if(t&&(t===this.Local||t===this.Session))try{void 0===(e=t.prepOut(e))&&(e=i),"true"==e&&(e=!0),"false"==e&&(e=!1),parseFloat(e)==e&&"object"!=typeof e&&(e=parseFloat(e))}catch(t){e=i}return e},_set:function(t,e,i,n){if(t&&(t===this.Local||t===this.Session)){if(!t.supported)try{return $.cookie(e,i,{path:"/",expires:n}),i}catch(t){console.error(OM.t("messageLocalStorageNotSupported")+" Error: "+t)}return t.cache.setItem(e,t.prepIn({created:(new Date).toLocaleString(),expires:n.getTime(),value:i})),t.rtn(t.prepIn(i))}},_setData:function(t,e,i,n){return!t||t!==this.Local&&t!==this.Session||(e&&""!=e?(n=t.setExpire(n),t.cache?i=t.set(e,i,n):(i=t.prepIn(i),$("footer").append('<div id="'+e+'" data-expires="'+n.getTime()+'" class="hidden">'+i+"</div>"),i=t.rtn(i))):console.error("Boutique.Storage.setData() failed because key was missing or invalid!")),i},_setExpire:function(t,e){let i=new Date;return!t||t!==this.Local&&t!==this.Session?null:(e=(e=parseInt(e))>0?e:525600,e*=6e4,i.setTime(i.getTime()+e),i)},_supported:function(t){let e,i,n;if(t){i=t===this.Local?"localStorage":t===this.Session?"sessionStorage":null;try{return e="__storage_test__",n=window[i],n.setItem(e,e),n.removeItem(e),void 0===window.JSON?t.supported=!1:t._enabled&&(t.supported=!0),t.supported}catch(e){return e instanceof DOMException&&t._enabled&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==n.length}}},Local:{_enabled:!0,cache:null,supported:!1,dec:function(t){return Boutique.Storage._dec(this,t)},del:function(t){return Boutique.Storage._del(this,t)},get:function(t){return Boutique.Storage._get(this,t)},getData:function(t){return Boutique.Storage._getData(this,t)},inc:function(t){return Boutique.Storage._inc(this,t)},init:function(){return Boutique.Storage._init(this)},prepIn:function(t,e){return Boutique.Storage._prepIn(this,t,e)},prepOut:function(t){return Boutique.Storage._prepOut(this,t)},rtn:function(t){return Boutique.Storage._rtn(this,t)},set:function(t,e,i){return Boutique.Storage._set(this,t,e,i)},setData:function(t,e,i){return Boutique.Storage._setData(this,t,e,i)},setExpire:function(t){return Boutique.Storage._setExpire(this,t)}},Session:{_enabled:!0,cache:null,supported:!1,dec:function(t){return Boutique.Storage._dec(this,t)},del:function(t){return Boutique.Storage._del(this,t)},get:function(t){return Boutique.Storage._get(this,t)},getData:function(t){return Boutique.Storage._getData(this,t)},inc:function(t){return Boutique.Storage._inc(this,t)},init:function(){return Boutique.Storage._init(this)},prepIn:function(t,e){return Boutique.Storage._prepIn(this,t,e)},prepOut:function(t){return Boutique.Storage._prepOut(this,t)},rtn:function(t){return Boutique.Storage._rtn(this,t)},set:function(t,e,i){return Boutique.Storage._set(this,t,e,i)},setData:function(t,e,i){return Boutique.Storage._setData(this,t,e,i)},setExpire:function(t){return Boutique.Storage._setExpire(this,t)}}},$((function(){Boutique.Storage.Local.init(),Boutique.Storage.Session.init()}))}(),function(){"use strict";Boutique.Validator={_arguments:{},_data:null,_errors:{},_errorsToMessage:!0,_fields:{},_filters:{},_form:null,_functions:{},_icons:{danger:"icon-angry",info:"icon-smiley",progress:"icon-spinner3 icon-spin",success:"icon-happy",validation:"icon-angry",warning:"icon-shocked"},_ifSet:!1,_ifNotSet:!1,_messages:{},_objectName:"Boutique.Validator",_rules:{},_validData:{},_auto:function(t){let e,i;return t=t||this,this._form&&(i=0,e=this._form.find("[data-validate]"),e.each((function(){let e,n,o,r,s=$(this),a=s.attr("name");if(e=s.data("label")?s.data("label"):s.closest(".form-group, .form-group-inline").find("label").text(),a){for(o in n=JSON.parse(s.attr("data-validate")),n)"function"==typeof(t[o]||void 0)?(r=n[o],r=is_bool(r)?[]:Array.isArray(r)?r:is_string(r)||is_numeric(r)?[r]:null,t[o].apply(t,r)):console.warn(t._objectName+" encountered an invalid rule declaration: ["+o+"]");t.validate(a,e),i++}})),console.log(this._objectName+" set up rules for ["+i+"] items successfully."),this.displayErrors()),this},_applyFilter:function(t){if($.isPlainObject(t)||Array.isArray(t))for(v in t)this._applyFilter(t[v]);else for(f in this._filters)t=filters[f](t)},_applyFilters:function(t){this._applyFilter(this._data[t])},_getDefaultDateFormat:function(){return DATETIME_FORMAT_YMDHIS},_getDefaultMessage:function(t,e){Boutique.Settings;let i="";switch(e=e||null,t){case"lengthBetween":i=sprintf(this._getTranslation(t),"%s",e[0],e[1],e[2]||this._getTranslation("symbols"));break;case"matchesField":case"matchesNotField":i=sprintf(this._getTranslation(t),"%s",e[1]);break;case"numBetween":i=sprintf(this._getTranslation(t),"%s",e[0],e[1],!1===e[2]?" "+this._getTranslation("withoutLimits"):"");break;case"numMax":case"numMin":i=sprintf(this._getTranslation(t),"%s",e[1]?" "+this._getTranslation("orEqualTo"):"",e[0]);break;case"fieldIn":i=sprintf(this._getTranslation(t),"%s",e[0].toString().split(/\s*,\s*/));break;case"length":case"lengthMax":case"lengthMin":i=sprintf(this._getTranslation(t),"%s",e[0],e[1]||this._getTranslation("symbols"));break;case"dateFormat":case"dateMax":case"dateMin":case"endsWith":case"endsNotWith":case"equals":case"equalsNot":case"matchesRegExp":case"startsWith":case"startsNotWith":i=sprintf(this._getTranslation(t),"%s",e[0]);break;case"alphaNum":case"ccNum":case"date":case"digits":case"email":case"float":case"integer":case"ip":case"required":case"url":i=this._getTranslation(t);break;default:i=this._getTranslation("default")}return i},_getTranslation:function(t){return Boutique.Settings.t("validate"+ucfirst(t))},_getVal:function(t){if(t.indexOf(".")>-1){for(arrData=null,keys=t.split("."),keyLen=keys.length,i=0;i<keyLen;++i){if(""==trim(keys[i]))return!1;if(null===arrData){if(!$.isset(this._data[keys[i]]))return!1;arrData=this._data[keys[i]]}else{if(!$.isset(arrData[keys[i]]))return!1;arrData=arrData[keys[i]]}}return arrData}return!!$.isset(this._data[t])&&this._data[t]},_registerError:function(t,e,i){t=t||"default",(i=i||null)||(i=this._messages[t]),i=sprintf(i,this._fields[e]),this._errors[e]=i},_reset:function(){this._ifSet=!1,this._ifNotSet=!1,this._rules={},this._filters={}},_setName:function(t,e){t=t||!1,e=e||!1,this._form&&e&&this._form.find(":input["+e+"]").each((function(){$(this).removeAttr("name"),t&&$(this).attr("name",$(this).attr(e))}))},_validate:function(t,e,i){let n,o,r,s,a;if((i=i||!1)&&($.isPlainObject(e)||Array.isArray(e))){for(n in e)if(!this._validate(t,e[n],i))return!1;return!0}for(o in this._rules)if(this._rules[o]&&(r=this._functions[o],s=this._arguments[o],a=s?r(t,e,s):r(t,e),!1===a))return this._registerError(o,t),this._reset(),!1;return this._validData[t]=e,!0},alphaNum:function(t){return t=t||null,this.setRule("alphaNum",(function(t,e){return!e.toString().match(/[^a-z0-9]/i)}),t),this},build:function(t,e){let i;t=$(t).closest("form"),e=$.isset(e)||!0;let n=this._objectName+" object created ";return t.length&&(this._form=t,i=this._form.cerealizeArray(),this.setData(i),e&&(this._auto(this),n+="and auto-validated ")),this},callback:function(t,e,i){const n=Boutique.Utilities;let o;return e=e||"",i=i||[],"function"==typeof(t||void 0)?(o="callback_"+n.uid(),this.setRule(o,(function(e,n){return args=array_merge([n],Array.isArray(i)?i:[i]),t.call(this,args)}),e,i)):console.warn(t+" is not callable!"),this},ccNum:function(t){return t=t||null,this.setRule("ccNum",(function(t,e){let i,n,o,r,s,a;if(i=(e=(e=e.toString()).replace(/\s+/g,"")).length,i<13||i>19)return!1;for(n=0,o=2,r=i-2;r>=0;r--)s=o*e[r],n+=Math.floor(s/10)+s%10,o=o%2+1;return a=(10-n%10)%10,a==e[i-1]}),t),this},clearErrors:function(t){return t=t||this._form,(t=$(t).closest("form")).length&&(t.find(".segmented-control button[data-navigate]").removeClass("has-error-boutique"),t.find(".form-control-feedback-block").remove()),this._reset(),this},date:function(t){return t=t||null,this.setRule("date",(function(t,e){return Boutique.Validator.isDate(e)}),t),this},dateFormat:function(t,e){return t=t||this._getDefaultDateFormat(),e=e||null,this.setRule("dateFormat",(function(e,i){return(new DateFormatter).formatDate(i,t)}),e,[t]),this},dateMax:function(t,e,i){return t=t||null,e=e||this._getDefaultDateFormat(),i=i||null,t=new Date(t),t=(new DateFormatter).formatDate(t,e),this.setRule("dateMax",(function(t,e,i){let n,o;return!!Boutique.Validator.isDate(e)&&(o=new Date(e),n=new Date(i[0]),n>=o)}),i,[t,e]),this},dateMin:function(t,e,i){let n=new DateFormatter;return t=t||null,e=e||this._getDefaultDateFormat(),i=i||null,t=new Date(t),t=n.formatDate(t,e),this.setRule("dateMin",(function(t,e,i){let n,o;return!!Boutique.Validator.isDate(e)&&(o=new Date(e),n=new Date(i[0]),n<=o)}),i,[t,e]),this},digits:function(t){return t=t||null,this.setRule("digits",(function(t,e){return 0===(e=e.toString()).length||e.match(/^[0-9]+$/)}),t),this},displayErrors:function(t,e){let i,n,o,r,s,a,u;t=t||this.getAllErrors(),e=e||this._form,e=$(e).closest("form");let l=[],c=this.getObjectSize(t);if(e.length&&(e.find(".segmented-control button[data-navigate]").removeClass("has-error-boutique"),e.find(".form-control-feedback-block").remove(),c)){for(i in console.warn("Validation encountered errors with the following fields:"),t)n=e.find('[name="'+i+'"]'),0===n.length&&(n=e.find('[data-name="'+i+'"]')),n.length&&(console.warn("    * "+i),a=n.parents(".segment"),o=n.closest(".form-group, .form-group-inline"),r="",r+='<div class="form-control-feedback-block status boutique-message-danger">',r+='<a data-focus="'+i+'">'+t[i]+"</a>",r+="</div>",o.children('div[class*="col-"]').append(r),n.parents(".segment").parents(e).length&&(u=n.parents(".segment").attr("id"),in_array(u,l)||l.push(u)));for(s in e.find(".form-control-feedback-block a").each((function(){$(this).off("click").on("click",(function(){$(this).closest("form").find('[name="'+$(this).attr("data-focus")+'"]').trigger("focus")}))})),l)e.find('.segmented-control button[data-navigate="'+l[s]+'"]').addClass("has-error-boutique");e.find('.segmented-control button[data-navigate="'+l[0]+'"]').trigger("click"),e.find(".form-control-feedback-block").animate({height:"show",opacity:1})}return this},displayFeedback:function(){let t;if(this._form)for(e in this._form.find(".form-control-feedback, .form-control-feedback-block").remove(),this._form.find(".has-error").removeClass("has-error has-feedback"),t=this.getAllErrors(),t)fld=this._form.find(':input[name="'+e+'"]'),frmgrp=fld.closest(".form-group"),frmgrp.addClass("has-error has-feedback"),fld.closest("div").append('<div class="form-control-feedback-block">'+t[e]+"</div>"),fld.closest("div").append('<i class="form-control-feedback icon '+this._icons.danger+'"></i>');return this},email:function(t){return t=t||null,this.setRule("email",(function(t,e){let i,n,o,r,s,a;return 0==(e=trim(e)).length||(i=!0,n=strrpos(e,"@"),!1===n?i=!1:(o=e.substr(n+1),r=e.substr(0,n),s=r.length,a=o.length,s<1||s>64||a<1||a>255||"."==r[0]||"."==r[s-1]||r.match(/\.\./)?i=!1:o.match(/^[A-Za-z0-9\-\.]+/)?o.match(/\.\./)?i=!1:r.replace(/\\/g,"").match(/^(\\.|[A-Za-z0-9!#%&`_=\/\'*+?^{}|~.-])+/)||r.replace(/\\\\/g,"").match(/^"(\\\\"|[^"])+"/)||(i=!1):i=!1),i)}),t),this},endsNotWith:function(t,e){return e=e||null,this.setRule("endsNotWith",(function(e,i,n){return i=trim(i),t=n[0],0===i.length||i.substr(-t.length)!==t}),e,[t]),this},endsWith:function(t,e){return e=e||null,this.setRule("endsWith",(function(e,i,n){return i=trim(i),t=n[0],0===i.length||i.substr(-t.length)===t}),e,[t]),this},equals:function(t,e,i){return e=e||"",i=i||null,this.setRule("equals",(function(t,e,i){return e=trim(e),i[0].toString()===e}),i,[t,e]),this},equalsNot:function(t,e,i){return e=e||"",i=i||null,this.setRule("equalsNot",(function(t,e,i){return e=trim(e),i[0].toString()!==e}),i,[t,e]),this},fieldIn:function(t,e){return e=e||null,is_string(t)&&(t=t.split(/\s*,\s*/)),this.setRule("fieldIn",(function(t,e,i){return in_array(e,i[0])}),e,[t]),this},filter:function(t){return"function"==typeof(t||void 0)&&this._filters.push(t),this},float:function(t){return t=t||null,this.setRule("float",(function(t,e){return Boutique.Validator.isFloat(e)}),t),this},getAllErrors:function(t){return 1==(t=$.isset(t)||!0)?this._errors:array_values(this._errors)},getError:function(t){return this._errors[t]},getObjectSize:function(t){let e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i},getValidData:function(){return this._validData},hasErrors:function(){return this.getObjectSize(this._errors)>0},ifNotSet:function(t){return this._ifNotSet=Array.isArray(t)?t:!is_string(t)||t.split(/\s*,\s*/),this},ifSet:function(t){return this._ifSet=Array.isArray(t)?t:!is_string(t)||t.split(/\s*,\s*/),this},integer:function(t){return t=t||null,this.setRule("integer",(function(t,e){return Boutique.Validator.isInteger(e)}),t),this},ip:function(t){return t=t||null,this.setRule("ip",(function(t,e){if(0===trim(e).length)return!0;if(trim(e).match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)){for(s in segs=trim(e).split("."),segs)if(segs[s]<0||segs[s]>255)return!1;return!0}return!1}),t),this},isDate:function(t){let e,i="Value passed to "+this._objectName+".isDate() is not a valid date format";if(0===trim(t).length)return!0;try{return e=new Date(t),e instanceof Date&&!isNaN(e.valueOf())}catch(t){return console.warn(i),!1}},isFloat:function(t){let e=trim(t),i=parseFloat(t);return e===i.toString()&&i===+i&&i!==(0|i)},isInteger:function(t){let e=trim(t),i=parseInt(t);return e===i.toString()&&i===+i&&i===(0|i)},length:function(t,e){return e=e||null,this.setRule("length",(function(t,e,i){return trim(e).length==i[0]}),e,[t]),this},lengthBetween:function(t,e,i){return i=(i=i||null)?null:this._getDefaultMessage("lengthBetween",[t,e]),this.lengthMin(t,i).lengthMax(e,i),this},lengthMax:function(t,e){return e=e||null,this.setRule("lengthMax",(function(t,e,i){return!(trim(e).length>i[0])}),e,[t]),this},lengthMin:function(t,e){return e=e||null,this.setRule("lengthMin",(function(t,e,i){return!(trim(e).length<i[0])}),e,[t]),this},matchesField:function(t,e,i){return e=e||"",i=i||null,this.setRule("matchesField",(function(t,e,i){return e=trim(e),i[0].toString()===e}),i,[this._getVal(t),e]),this},matchesNotField:function(t,e,i){return e=e||"",i=i||null,this.setRule("matchesNotField",(function(t,e,i){return e=trim(e),i[0].toString()!==e}),i,[this._getVal(t),e]),this},matchesRegExp:function(t,e,i){return e=e||"",i=i||null,this.setRule("matchesRegExp",(function(t,e,i){let n="g",o=i[0].toString();return o.match(new RegExp("i$"))&&(n+="i",o=o.slice(0,-1)),o=o.slice(1,-1),console.log('... Validator is now matching against the following regular expression string: "'+e+'".match(new RegExp("'+o+'", "'+n+'"))'),null!==(e=trim(e)).match(new RegExp(o,n))}),i,[t,e]),this},numBetween:function(t,e,i,n){return i=$.isset(i)||!0,n=n||null,n=this._getDefaultMessage("numBetween",[t,e,i]),this.numMin(t,i,n).numMax(e,i,n),this},numMax:function(t,e,i){return e=$.isset(e)||!0,i=i||null,this.setRule("numMax",(function(e,i,n){let o;return 0===i.length||(i=parseFloat(i),t=parseFloat(n[0]),o=Boolean(n[1]),i<t||!0===o&&i===t)}),i,[t,e]),this},numMin:function(t,e,i){return e=$.isset(e)||!0,i=i||null,this.setRule("numMin",(function(e,i,n){let o;return 0===i.length||(i=parseFloat(i),t=parseFloat(n[0]),o=Boolean(n[1]),i>t||!0===o&&i===t)}),i,[t,e]),this},required:function(t){return t=t||null,this.setRule("required",(function(t,e){return"string"==typeof e&&(e=trim(e)),$.isset(e)&&!1!==e&&""!==e}),t),this},setData:function(t){return this._data=t,this._errors={},this},setRule:function(t,e,i,n){i=i||"",n=n||[],$.isset(this._rules[t])||(this._rules[t]=!0,$.isset(this._functions[t])||(this._functions[t]=e),this._arguments[t]=n,this._messages[t]=is_string(i)&&""!=trim(i)?i:this._getDefaultMessage(t,n))},startsNotWith:function(t,e){return e=e||null,this.setRule("startsNotWith",(function(e,i,n){return i=trim(i),t=n[0],0===i.length||i.substr(0,t.length)!==t}),e,[t]),this},startsWith:function(t,e){return e=e||null,this.setRule("startsWith",(function(e,i,n){return i=trim(i),t=n[0],0===i.length||i.substr(0,t.length)===t}),e,[t]),this},url:function(t){return t=t||null,this.setRule("url",(function(t,e){return 0===(e=trim(e)).length||e.match(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i)}),t),this},validate:function(t,e,i){e=e||"",i=i||!1;let n,o,r,s=!0;if(!1!==this._ifSet)for(n in s=!1,o=Array.isArray(this._ifSet)?this._ifSet:[t],o)empty(this._data[o[n]])||(s=!0);if(!1!==this._ifNotSet)for(n in o=Array.isArray(this._ifNotSet)?this._ifNotSet:[t],o)empty(this._data[o[n]])||(s=!1);return s&&(this._fields[t]=e||'The field named "'+t+'"',this._applyFilters(t),r=this._getVal(t),this._validate(t,r,i)),this._reset(),r},validateIfNotSet:function(t,e,i){return this.ifNotSet().validate(t,e,i)},validateIfSet:function(t,e,i){return this.ifSet().validate(t,e,i)}}}(),function(){"use strict";Boutique.Controllers.Order={action:null,block:null,lastId:null,prefix:"#order",bindEvents:function(){const t=Boutique.Controllers.Order,e=Boutique.Utilities;e.initSegmentSelect(t.dialog),e.initSearchForm(t.formList,t.index),$(t.prefix+"_table, "+t.prefix+"_show").off("click").on("click",(function(e){t.show(e)})),$(t.prefix+"_add").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_upd").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_del").off("click").on("click",(function(){t.remove(this)}))},delete:function(t){const e=Boutique.Controllers.Order,i=Boutique.Messages,n=Boutique.Settings;if(t)return $.ajax({type:"delete",url:"/orders/"+t,data:e.formWrite.cerealize(),beforeSend:function(){i.progress(n.t("messageDeleting"),e.block)},success:function(t,i,n){e.set(t,i,n)},error:function(t,n,o){i.response(t,n,o,e.block)}}),!1},duplicate:function(){const t=Boutique.Controllers.Order;t.itemId=null,$(t.formWrite).find("#id").val("")},edit:function(t){const e=Boutique.Controllers.Order,i=Boutique.Messages,n=Boutique.Settings;e.itemId&&$.ajax({type:"get",url:"/orders/"+e.itemId,beforeSend:function(){i.progress(n.t("messageLoading"),e.block)},success:function(n,o,r){e.formWrite.decerealize(n),i.hide(e.block),e.lastId=e.itemId,"function"==typeof(t||void 0)&&t.call()},error:function(t,n,o){i.response(t,n,o,e.block)}})},hide:function(){Boutique.Controllers.Order.dialog.modal("hide")},index:function(){const t=Boutique.Controllers.Order,e=Boutique.Messages,i=Boutique.Settings;t.block=$("body"),$.ajax({type:"get",url:"/orders",data:t.formList.cerealize(),beforeSend:function(){e.progress(i.t("messageLoading"),t.block)},success:function(i,n,o){t.formList.find("[data-async]").html(i),t.bindEvents(),e.hide(t.block)},error:function(i,n,o){e.response(i,n,o,t.block)}})},init:function(){const t=Boutique.Controllers.Order;t.dialog=$(t.prefix+"_dialog"),t.formList=$(t.prefix+"_form_list"),t.formWrite=$(t.prefix+"_form_write"),t.action=null,t.hide(),t.bindEvents(),"orders"===PAGE&&t.index()},remove:function(t){const e=Boutique.Controllers.Order,i=Boutique.Settings;let n=e.itemId?e.itemId:$(t).closest("[data-id]").data("id");if(n)return e.block=$(e.prefix+"_dialog:visible").length?e.dialog.find(".modal-content"):$("body"),bootbox.confirm({title:"Confirm",message:'<p class="center">'+i.t("messageConfirmDelete")+"</p>",callback:function(t){t&&e.delete(n)}}),!1},reset:function(){const t=Boutique.Controllers.Order,e=Boutique.Validator;t.formWrite.length&&(t.formWrite.get(0).reset(),e.clearErrors(t.formWrite)),$(t.prefix+"_id").val(""),"view"===t.action?(t.dialog.find(".form-control").alterClass("form-control","form-control-plaintext").prop("readonly",!0),t.dialog.find('[data-bs-dismiss="modal"]').addClass("btn-last")):(t.formWrite.find(".form-control-plaintext").alterClass("form-control-plaintext","form-control").prop("readonly",!1),t.dialog.find('[data-bs-dismiss="modal"]').removeClass("btn-last"))},save:function(){const t=Boutique.Controllers.Order,e=(Boutique.Utilities,Boutique.Messages),i=Boutique.Settings,n=Boutique.Validator;let o=t.itemId&&"edit"===t.action?"/"+t.itemId:"";if(t.bv=n.build(t.formWrite),t.bv.hasErrors())return!1;n.clearErrors(t.formWrite),$.ajax({type:"edit"===t.action?"put":"post",url:"/orders"+o,data:t.formWrite.cerealize(),beforeSend:function(){e.progress(i.t("messageSaving"),t.block)},success:function(e,i,n){t.set(e,i,n)},error:function(i,n,o){e.response(i,n,o,t.block)}})},set:function(t,e,i){const n=Boutique.Controllers.Order;Boutique.Messages.response(t,e,i,n.block,n.init)},show:function(t){const e=Boutique.Controllers.Order;e.action=t&&t.target&&t.target.dataset.action;let i=$(e.prefix+"_add"),n=$(e.prefix+"_upd"),o=$(e.prefix+"_del");e.action&&(e.reset(),e.block=e.dialog.find(".modal-content"),e.itemId=!!t.target.dataset.id&&t.target.dataset.id,$(i).add(n).add(o).hide(),e.itemId?"edit"===e.action?(n.show(),o.show()):"copy"===e.action&&i.show():i.show(),e.dialog.modal("show"),e.dialog.off("shown.bs.modal").on("shown.bs.modal",(function(){e.action.match(/(edit|view)/i)?e.edit():"copy"===e.action&&e.edit(e.duplicate)})))}},$((function(){Boutique.Controllers.Order.init()}))}(),function(){"use strict";Boutique.Controllers.Product={action:null,block:null,lastId:null,prefix:"#product",bindEvents:function(){const t=Boutique.Controllers.Product,e=Boutique.Utilities;e.initSegmentSelect(t.dialog),e.initSearchForm(t.formList,t.index),$(t.prefix+"_table, "+t.prefix+"_show").off("click").on("click",(function(e){t.show(e)})),$(t.prefix+"_add").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_upd").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_del").off("click").on("click",(function(){t.remove(this)}))},buildDetails:function(t){const e=Boutique.Controllers.Product;Boutique.Utilities;let i,n,o,r,s,a='<tr><td colspan="8"><h5 class="msg-no-records">No %s available for this product</h5></tr>',u=["name","street_address","city","state","zip","country_code","order_status","created_at"],l=["color","quantity","size","sku","cost_cents","price_cents","sale_price_cents"],c=$(e.prefix+"_orders_table tbody"),d=$(e.prefix+"_stocks_table tbody"),f={};try{f=JSON.parse(t)}catch(t){}if(f.orders&&f.orders.length)for(o in f.orders){for(r in i=$("<tr></tr>"),u)s=f.orders[o][u[r]],"created_at"===u[r]&&(s=new Date(s).toLocaleDateString()),n=$("<td><div>"+s+"</div></td>"),i.append(n);c.append(i)}else c.html(sprintf(a,"orders"));if(f.stocks&&f.stocks.length)for(o in f.stocks){for(r in i=$("<tr></tr>"),l)s=f.stocks[o][l[r]],n=$("<td><div>"+s+"</div></td>"),i.append(n);d.append(i)}else d.html(sprintf(a,"stocks"))},delete:function(t){const e=Boutique.Controllers.Product,i=Boutique.Messages,n=Boutique.Settings;if(t)return $.ajax({type:"delete",url:"/products/"+t,data:e.formWrite.cerealize(),beforeSend:function(){i.progress(n.t("messageDeleting"),e.block)},success:function(t,i,n){e.set(t,i,n)},error:function(t,n,o){i.response(t,n,o,e.block)}}),!1},duplicate:function(){const t=Boutique.Controllers.Product;t.itemId=null,$(t.formWrite).find("#id").val("")},edit:function(t){const e=Boutique.Controllers.Product,i=Boutique.Messages,n=Boutique.Settings;e.itemId&&$.ajax({type:"get",url:"/products/"+e.itemId,beforeSend:function(){i.progress(n.t("messageLoading"),e.block)},success:function(n,o,r){"copy"!==e.action&&e.buildDetails(n),e.formWrite.decerealize(n),i.hide(e.block),e.lastId=e.itemId,"function"==typeof(t||void 0)&&t.call()},error:function(t,n,o){i.response(t,n,o,e.block)}})},hide:function(){Boutique.Controllers.Product.dialog.modal("hide")},index:function(){const t=Boutique.Controllers.Product,e=Boutique.Messages,i=Boutique.Settings;t.block=$("body"),$.ajax({type:"get",url:"/products",data:t.formList.cerealize(),beforeSend:function(){e.progress(i.t("messageLoading"),t.block)},success:function(i,n,o){t.formList.find("[data-async]").html(i),t.bindEvents(),e.hide(t.block)},error:function(i,n,o){e.response(i,n,o,t.block)}})},init:function(){const t=Boutique.Controllers.Product;t.dialog=$(t.prefix+"_dialog"),t.formList=$(t.prefix+"_form_list"),t.formWrite=$(t.prefix+"_form_write"),t.action=null,t.hide(),t.bindEvents(),"products"===PAGE&&t.index()},remove:function(t){const e=Boutique.Controllers.Product,i=Boutique.Settings;let n=e.itemId?e.itemId:$(t).closest("[data-id]").data("id");if(n)return e.block=$(e.prefix+"_dialog:visible").length?e.dialog.find(".modal-content"):$("body"),bootbox.confirm({title:"Confirm",message:'<p class="center">'+i.t("messageConfirmDelete")+"</p>",callback:function(t){t&&e.delete(n)}}),!1},reset:function(){const t=Boutique.Controllers.Product,e=Boutique.Validator;let i=$(t.prefix+"_orders_table tbody"),n=$(t.prefix+"_stocks_table tbody");i.html(""),n.html(""),t.formWrite.length&&(t.formWrite.get(0).reset(),e.clearErrors(t.formWrite)),$(t.prefix+"_id").val(""),"view"===t.action?(t.dialog.find(".form-control").alterClass("form-control","form-control-plaintext").prop("readonly",!0),t.dialog.find('[data-bs-dismiss="modal"]').addClass("btn-last")):(t.formWrite.find(".form-control-plaintext").alterClass("form-control-plaintext","form-control").prop("readonly",!1),t.dialog.find('[data-bs-dismiss="modal"]').removeClass("btn-last"))},save:function(){const t=Boutique.Controllers.Product,e=(Boutique.Utilities,Boutique.Messages),i=Boutique.Settings,n=Boutique.Validator;let o=t.itemId&&"edit"===t.action?"/"+t.itemId:"";if(t.bv=n.build(t.formWrite),t.bv.hasErrors())return!1;n.clearErrors(t.formWrite),$.ajax({type:"edit"===t.action?"put":"post",url:"/products"+o,data:t.formWrite.cerealize(),beforeSend:function(){e.progress(i.t("messageSaving"),t.block)},success:function(e,i,n){t.set(e,i,n)},error:function(i,n,o){e.response(i,n,o,t.block)}})},set:function(t,e,i){const n=Boutique.Controllers.Product;Boutique.Messages.response(t,e,i,n.block,n.init)},show:function(t){const e=Boutique.Controllers.Product;e.action=t&&t.target&&t.target.dataset.action;let i=$(e.prefix+"_add"),n=$(e.prefix+"_upd"),o=$(e.prefix+"_del");e.action&&(e.reset(),e.block=e.dialog.find(".modal-content"),e.itemId=!!t.target.dataset.id&&t.target.dataset.id,$(i).add(n).add(o).hide(),e.itemId?"edit"===e.action?(n.show(),o.show()):"copy"===e.action&&i.show():i.show(),e.dialog.modal("show"),e.dialog.off("shown.bs.modal").on("shown.bs.modal",(function(){e.action.match(/(edit|view)/i)?e.edit():"copy"===e.action&&e.edit(e.duplicate)})))}},$((function(){Boutique.Controllers.Product.init()}))}(),function(){"use strict";Boutique.Controllers.Stock={action:null,block:null,lastId:null,prefix:"#stock",bindEvents:function(){const t=Boutique.Controllers.Stock,e=Boutique.Utilities;e.initSegmentSelect(t.dialog),e.initSearchForm(t.formList,t.index),$(t.prefix+"_table, "+t.prefix+"_show").off("click").on("click",(function(e){t.show(e)})),$(t.prefix+"_add").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_upd").off("click").on("click",(function(){t.save(this)})),$(t.prefix+"_del").off("click").on("click",(function(){t.remove(this)}))},delete:function(t){const e=Boutique.Controllers.Stock,i=Boutique.Messages,n=Boutique.Settings;if(t)return $.ajax({type:"delete",url:"/stocks/"+t,data:e.formWrite.cerealize(),beforeSend:function(){i.progress(n.t("messageDeleting"),e.block)},success:function(t,i,n){e.set(t,i,n)},error:function(t,n,o){i.response(t,n,o,e.block)}}),!1},duplicate:function(){const t=Boutique.Controllers.Stock;t.itemId=null,$(t.formWrite).find("#id").val("")},edit:function(t){const e=Boutique.Controllers.Stock,i=Boutique.Messages,n=Boutique.Settings;e.itemId&&$.ajax({type:"get",url:"/stocks/"+e.itemId,beforeSend:function(){i.progress(n.t("messageLoading"),e.block)},success:function(n,o,r){e.formWrite.decerealize(n),i.hide(e.block),e.lastId=e.itemId,"function"==typeof(t||void 0)&&t.call()},error:function(t,n,o){i.response(t,n,o,e.block)}})},hide:function(){Boutique.Controllers.Stock.dialog.modal("hide")},index:function(){const t=Boutique.Controllers.Stock,e=Boutique.Messages,i=Boutique.Settings;t.block=$("body"),$.ajax({type:"get",url:"/stocks",data:t.formList.cerealize(),beforeSend:function(){e.progress(i.t("messageLoading"),t.block)},success:function(i,n,o){t.formList.find("[data-async]").html(i),t.bindEvents(),e.hide(t.block)},error:function(i,n,o){e.response(i,n,o,t.block)}})},init:function(){const t=Boutique.Controllers.Stock;t.dialog=$(t.prefix+"_dialog"),t.formList=$(t.prefix+"_form_list"),t.formWrite=$(t.prefix+"_form_write"),t.action=null,t.hide(),t.bindEvents(),"stocks"===PAGE&&t.index()},remove:function(t){const e=Boutique.Controllers.Stock,i=Boutique.Settings;let n=e.itemId?e.itemId:$(t).closest("[data-id]").data("id");if(n)return e.block=$(e.prefix+"_dialog:visible").length?e.dialog.find(".modal-content"):$("body"),bootbox.confirm({title:"Confirm",message:'<p class="center">'+i.t("messageConfirmDelete")+"</p>",callback:function(t){t&&e.delete(n)}}),!1},reset:function(){const t=Boutique.Controllers.Stock,e=Boutique.Validator;t.formWrite.length&&(t.formWrite.get(0).reset(),e.clearErrors(t.formWrite)),$(t.prefix+"_id").val(""),"view"===t.action?(t.dialog.find(".form-control").alterClass("form-control","form-control-plaintext").prop("readonly",!0),t.dialog.find('[data-bs-dismiss="modal"]').addClass("btn-last")):(t.formWrite.find(".form-control-plaintext").alterClass("form-control-plaintext","form-control").prop("readonly",!1),t.dialog.find('[data-bs-dismiss="modal"]').removeClass("btn-last"))},save:function(){const t=Boutique.Controllers.Stock,e=(Boutique.Utilities,Boutique.Messages),i=Boutique.Settings,n=Boutique.Validator;let o=t.itemId&&"edit"===t.action?"/"+t.itemId:"";if(t.bv=n.build(t.formWrite),t.bv.hasErrors())return!1;n.clearErrors(t.formWrite),$.ajax({type:"edit"===t.action?"put":"post",url:"/stocks"+o,data:t.formWrite.cerealize(),beforeSend:function(){e.progress(i.t("messageSaving"),t.block)},success:function(e,i,n){t.set(e,i,n)},error:function(i,n,o){e.response(i,n,o,t.block)}})},set:function(t,e,i){const n=Boutique.Controllers.Stock;Boutique.Messages.response(t,e,i,n.block,n.init)},show:function(t){const e=Boutique.Controllers.Stock;e.action=t&&t.target&&t.target.dataset.action;let i=$(e.prefix+"_add"),n=$(e.prefix+"_upd"),o=$(e.prefix+"_del");e.action&&(e.reset(),e.block=e.dialog.find(".modal-content"),e.itemId=!!t.target.dataset.id&&t.target.dataset.id,$(i).add(n).add(o).hide(),e.itemId?"edit"===e.action?(n.show(),o.show()):"copy"===e.action&&i.show():i.show(),e.dialog.modal("show"),e.dialog.off("shown.bs.modal").on("shown.bs.modal",(function(){e.action.match(/(edit|view)/i)?e.edit():"copy"===e.action&&e.edit(e.duplicate)})))}},$((function(){Boutique.Controllers.Stock.init()}))}();
