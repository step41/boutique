(function($){$.fn.dcMegaMenu=function(F){var G={classParent:'dc-mega',classContainer:'sub-container',classSubParent:'mega-hdr',classSubLink:'mega-hdr',classWidget:'dc-extra',classIcon:'dc-mega-icon',containerPadding:6,rowItems:3,speed:'fast',effect:'fade',event:'hover',fullWidth:false,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){}};var F=$.extend(G,F);var H=this;return H.each(function(z){var A=G.classSubParent;var B=G.classSubLink;var C=G.classParent;var D=G.classContainer;var E=G.classWidget;megaSetup();function megaOver(){var a=$('.sub',this);$(this).addClass('mega-hover');if(G.effect=='fade'){$(a).fadeIn(G.speed)}if(G.effect=='slide'){$(a).show(G.speed)}G.beforeOpen.call(this)}function megaAction(a){var b=$('.sub',a);$(a).addClass('mega-hover');if(G.effect=='fade'){$(b).fadeIn(G.speed)}if(G.effect=='slide'){$(b).show(G.speed)}G.beforeOpen.call(this)}function megaOut(){var a=$('.sub',this);$(this).removeClass('mega-hover');$(a).hide();G.beforeClose.call(this)}function megaActionClose(a){var b=$('.sub',a);$(a).removeClass('mega-hover');$(a).find('.sub').hide();G.beforeClose.call(this)}function megaReset(){$('li',H).removeClass('mega-hover');$('.sub',H).hide()}function megaSetup(){$arrow='<span class="'+G.classIcon+'"></span>';var w=C+'-li';var x=H.outerWidth();$('> li',H).each(function(){$('> .'+D+' > ul',this).unwrap();var c=$('> ul',this);var d=$('> a',this);if(c.length){d.addClass(C).find('.'+G.classIcon).remove();d.addClass(C).append($arrow);c.addClass('sub').wrap('<div class="'+D+'" />');var e=$(this).position();pl=e.left;if($('ul',c).length){$(this).addClass(w);$('.'+D,this).addClass('mega');$('> li',c).each(function(){$(this).removeClass(E);$(this).addClass('mega-unit');if($('> ul',this).length){$(this).addClass(A);$('> a',this).addClass(A+'-a')}else{$(this).addClass(B);$('> a',this).addClass(B+'-a')}});$('.row > .mega-unit').unwrap();var f=$('.mega-unit',this);rowSize=parseInt(G.rowItems);for(var i=0;i<f.length;i+=rowSize){f.slice(i,i+rowSize).wrapAll('<div class="row" />')}c.show();var g=$(this).width();var h=pl+g;var j=x-h;var k=c.outerWidth();var l=parseInt(G.containerPadding*2);var m=c.parent('.'+D).outerWidth();var n=(m-k)+l;if(G.fullWidth==true){var o=x-n;c.parent('.'+D).css({width:o+'px'});H.addClass('full-width')}var p=$('.mega-unit',c).outerWidth(true);var q=$('.row:eq(0) .mega-unit',c).length;var r=p*q;var s=r+n;$('.row',this).each(function(){$('.mega-unit:last',this).addClass('last');var b=undefined;$('.mega-unit > a',this).each(function(){var a=parseInt($(this).height());if(b===undefined||b<a){b=a}});$('.mega-unit > a',this).css('height',b+'px');$(this).css('width',r+'px')});if(G.fullWidth==true){v={left:0}}else{var t=j<t?t+t-j:(s-g)/2;var u=pl-t;var v={left:pl+'px',marginLeft:-t+'px'};if(u<0){v={left:0}}else if(j<t){v={right:0}}}$('.'+D,this).css(v);$('.row',c).each(function(){var a=$(this).height();$('.mega-unit',this).css({height:a+'px'});$(this).parent('.row').css({height:a+'px'})});c.hide()}else{$('.'+D,this).addClass('non-mega').css('left',pl+'px')}}});var y=$('> li > a',H).outerHeight(true);$('.'+D,H).css({top:y+'px'}).css('z-index',99999);if(G.event=='hover'){$('li',H).hover(megaOver,megaOut)}if(G.event=='click'){$('body').mouseup(function(e){if(!$(e.target).parents('.mega-hover').length){megaReset()}});$('> li > a.'+C,H).click(function(e){var a=$(this).parent();if(a.hasClass('mega-hover')){megaActionClose(a)}else{megaAction(a)}e.preventDefault()})}G.onLoad.call(this)}})}})(jQuery);
