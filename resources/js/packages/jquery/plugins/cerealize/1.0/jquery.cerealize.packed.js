$.fn.cerealize=function(c){c=c||'';var d=$(this).closest('form');var e='';var f=[];var g,checked,key;var h=(c)?$(':input').filter(c):$(':input');$(this).find(h).each(function(){var n,mv,v;if($(this).attr('name')){n=$(this).attr('name');mv=(n.match(/\[\]$/));if(f[n]&&!mv){$.clog('CEREALIZE WARNING!!! The field ['+n+'] exists more than once in form ['+$(this).closest('form').attr('id')+']. Skipping further assignments for this field.','warning');return}v=encodeURIComponent($(this).val());if($(this).is(':radio')||$(this).is(':checkbox')){if($(this).is(':checked')||$(this).hasClass('boolean')){f[n]=(f[n])?f[n]+','+v:v}}else{f[n]=(f[n])?f[n]+','+v:v}}});for(key in f){if(key.match(/\[\]$/)){$('[name="'+key+'"]').each(function(){var a=$(this);var b;if(a.is('[multiple]')){b=a.val();if(b.length){for(v in b){e+='&'+key+'='+b[v]}}else{e+='&'+key+'='}}else{g=(a.is(':radio')||a.is(':checkbox'));checked=(a.is(':checked')||a.hasClass('boolean'));if(!g||(g&&checked)){e+='&'+key+'='+a.val()}}})}else{e+='&'+key+'='+f[key]}}return e.replace(/^\s*&/,'')};
