(function(b,c,d){if(typeof define==="function"&&define.amd){define(["exports","jquery"],function(a,$){return c(a,$)})}else if(typeof exports!=="undefined"){var $=require("jquery");c(exports,$)}else{c(b,(b.jQuery||b.Zepto||b.ender||b.$))}}(this,function(h,$){var j={validate:/^[a-z_][a-z0-9_-]*(?:\[(?:\d*|[a-z0-9_-]+)\])*$/i,key:/[a-z0-9_-]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_-]+$/i};function FormSerializer(e,f){var g={},pushes={};function build(a,b,c){a[b]=c;return a}function makeObject(a,b){var c=a.match(j.key),k;while((k=c.pop())!==undefined){if(j.push.test(k)){var d=incrementPush(a.replace(/\[\]$/,''));b=build([],d,b)}else if(j.fixed.test(k)){b=build([],k,b)}else if(j.named.test(k)){b=build({},k,b)}}return b}function incrementPush(a){if(pushes[a]===undefined){pushes[a]=0}return pushes[a]++}function encode(a){switch($('[name="'+a.name+'"]',f).attr("type")){case"checkbox":return a.value==="on"?true:a.value;default:return a.value}}function addPair(a){if(!j.validate.test(a.name))return this;var b=makeObject(a.name,encode(a));g=e.extend(true,g,b);return this}function addPairs(a){if(!e.isArray(a)){throw new Error("formSerializer.addPairs expects an Array");}for(var i=0,len=a.length;i<len;i++){this.addPair(a[i])}return this}function serialize(){return g}function serializeJSON(){return JSON.stringify(serialize())}this.addPair=addPair;this.addPairs=addPairs;this.serialize=serialize;this.serializeJSON=serializeJSON}FormSerializer.patterns=j;FormSerializer.serializeObject=function serializeObject(){if(this.length>1){return new Error("jquery-serialize-object can only serialize one form at a time")}return new FormSerializer($,this).addPairs(this.serializeArray()).serialize()};FormSerializer.serializeJSON=function serializeJSON(){if(this.length>1){return new Error("jquery-serialize-object can only serialize one form at a time")}return new FormSerializer($,this).addPairs(this.serializeArray()).serializeJSON()};if(typeof $.fn!=="undefined"){$.fn.serializeObject=FormSerializer.serializeObject;$.fn.serializeJSON=FormSerializer.serializeJSON}h.FormSerializer=FormSerializer;return FormSerializer}));
